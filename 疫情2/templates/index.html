{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>疫情之下</title>
    <link rel="stylesheet" href="{%static 'css/slide.css'%}">
    <link rel="stylesheet" href="{%static 'css/index.css'%}">
    <link rel="stylesheet" href="{%static 'css/hero.css'%}">
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
    <style>
        .banner1{
            position: relative;
            width: 100%;
            height: 85vh;
            background: url("{%static 'images/1.jpg'%}") no-repeat;
            /* 保持原有尺寸比例，裁切长边 */
            background-size: cover;
            /* 图片定位正中间 */    
            background-position: center center;
        }
        
       .banner{
        width: 100%;
        height: 100vh;
        background-color: rgba(245, 59, 12, 0.5) ;
        border-bottom: 1px black dashed;
       }
       #hero{
        border-bottom: 1px black dashed;
       }
    </style>
</head>

<body>
    <header>
        <a href="#" class="logo">疫情之下</a>
        <ul>
            <li><a href="#">首页</a></li>
            <li><a href="#hero">抗疫英雄</a></li>
            <li><a href="#">暖心事迹</a></li>
            <li><a href="#">溯源进展</a></li>
            <li><a href="#">最新消息</a></li>
            <li><a href="#">掌握情报</a></li>
            <!-- https://lab.isaaclin.cn/nCoV/api/rumors?page=1&num=60&rumorType=1 -->
        </ul>
    </header>
    <div class="banner">
        <section class="banner1"></section>
    </div>
    
    <div id="hero" >
       
        {% for hero in heros %}
        {% if hero.index < 5 %}
        <div class="hero1">
            <div class="card ">
            
                <div class="photo">
                    <img src="{{hero.图片url}}" alt="">
                </div>
                <h1>{{hero.姓名}}</h1>
                <h2>{{hero.简介}}</h2>
                <p>{{hero.事迹}}</p>
                <a href="{{hero.url}}">了解更多</a>
            </div>
        </div>
         
        {% else %}
        <div class="hero2" style="display:none">
            <div class="card" >
                <div class="photo">
                    <img src="{{hero.图片url}}" alt="">
                </div>
                <h1>{{hero.姓名}}</h1>
                <h2>{{hero.简介}}</h2>
                <p>{{hero.事迹}}</p>
                <a href="{{hero.url}}">了解更多</a>
            </div> 
        </div>
        
        {% endif %}
        {% endfor %}
    </div>
    
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script>
        window.addEventListener("scroll",()=>{
            let header=document.querySelector("header");
            let logo=document.querySelector("header>a");
            let height=$(window).height()

            header.classList.toggle("sticky",window.scrollY>0);
            if(window.scrollY<height*0.95){
                logo.innerHTML='疫情之下'
            }
            else if(window.scrollY<height*2){
                logo.innerHTML='疫情英雄'
            }
            
            
        })
        var bgimg=["url({%static 'images/1.jpg'%})","url({%static 'images/2.jpg'%})","url({%static 'images/3.jpg'%})","url({%static 'images/4.jpg'%})","url({%static 'images/5.jpg'%})"]
        var bgimgid=0
        function changebgimg(){
            if(bgimgid==4){
                bgimgid=0
            }
            var banner1=document.querySelector('.banner1')
            bgimgid++
            banner1.style.backgroundImage=bgimg[bgimgid]
        }
        setInterval(changebgimg,5000)
        var heroflag=0
        function changehero(){
            let hero1=document.querySelectorAll(".hero1");
            let hero2=document.querySelectorAll(".hero2");
            
            if(heroflag==0){
                heroflag=1
                for(var i=0;i<hero1.length;i++){
                    
                    hero1[i].style.display='none';
                    hero2[i].style.display='block';
                }
                
            }
            else{
                heroflag=0
                for(var i=0;i<hero1.length;i++){
                    
                    hero2[i].style.display='none';
                    hero1[i].style.display='block';
                }
            }
            
        }
        var Interval=setInterval(changehero,5000)
            var cards=document.querySelectorAll(".card");
            for(var i=0;i<cards.length;i++){
                cards[i].addEventListener('mouseover',function(){
                    clearInterval(Interval)
                })
                cards[i].addEventListener('mouseout',function(){
                    Interval=setInterval(changehero,5000)
                })
            }
        
        

    </script>
    
</body>
</html>